433
Моделирование трехмерных сцен на основе оптимизированных октодеревьев
1 Теоретические положения об использовании деревьев в приложениях компьютерной графики 
1.3 Октодеревья 
----------
Октодерево (восьмеричное дерево) - тип древовидной структуры данных, в которой у каждого внутреннего узла ровно восемь «потомков». Каждый узел (англ. node) в дереве октантов делит пространство на восемь новых октантов. В региональной точке октодерева узел сохраняет явную трёхмерную точку, которая является «центром» разделения пространства для этого узла. Данная точка определяет один из углов каждого из восьми дочерних пространств. Октодеревья не могут считаться k-мерными деревьями, поскольку k-мерные деревья разделяются вдоль размерности, а октодеревья разделяются вокруг точки. Кроме того, k-мерные деревья всегда являются двоичными, что неверно для октодеревьев.
Все поддеревья октодерева являются восьмеричными деревьями.
Октотомические деревья являются естественным распространением концепции квадродерева для представления трехмерного пространства. Подобно тому, как при построении квадродерева область разбивается на четыре части, при построении октодерева трехмерный объект подразделяется на восемь кубов (октантов). Если какой-либо из октантов является однородным, т. е. он располагается либо целиком внутри объекта, либо целиком снаружи, разбиение заканчивается. Иначе, если октант не является однородным, т. е. октант пересекается граничной поверхностью объекта, он разбивается далее на восемь подоктантов. Процесс разбиения завершается, когда все листовые узлы октодерева станут однородными, возможно с некоторой погрешностью.
На рисунке (1) изображена структура октодерева и принцип разбиения пространства на более малые части.
Рисунок 1 – принцип деления октодерева
Октодеревья формируются по следующему принципу: изначально создается корень дерева, имеющий размерность . При добавлении новых узлов пространство, описываемое узлом, дробится на 8 равных кубических частей до тех пор, пока не останется атомарный элемент размерности 1. Если узел уже использовался и раздроблен, дробления не происходит. Происходит выбор той части, в которой находится лист с искомыми координатами для вставки элемента. После достижения листа в него вставляются данные.
Пример вставки узла в октодерево с размерностью корня 8. Изначально дерево имеет лишь один корневой элемент, описывающий все пустое пространство. После чего в его узел добавляется один элемент. В этом случае, пространство разбивается на 8 частей, вычисляется часть, в которой находится требуемый лист и происходит рекурсивная вставка элемента в требуемую часть. Требуемая часть также является октодеревом. Данный процесс проиллюстрирован на рисунке 2. Узлы, в которых расположен символ «Е» являются пустыми листовыми узлами, а листья с цифрой – имеют некоторые данные, обозначаемые данным числом.
Рисунок 2 – добавление первого узла в октодерево
При попытке добавления еще одного элемента дальнейшего раздробления раздробленных элементов пространства уже не будет. Это продемонстрировано на рисунке 3 - в дерево был вставлен еще один элемент, но произошло раздробление лишь узла на предпоследнем уровне.
Рисунок 3 – дерево после добавление второго узла
В дальнейших главах будут рассмотрены способы оптимизации хранения и обработки трехмерного пространства посредствам октодеревьев.
Аналогично k-d деревьям, восьмеричные деревья бывают однородными и неоднородными по своей специфике – хранение и сжатие пространства, зачастую в этих задачах используются неоднородные деревья.