299
РАЗРАБОТКА МОБИЛЬНОГО ПРИЛОЖЕНИЯ МНОГОЗВЕННОЙ АРХИТЕКТУРЫ НА БАЗЕ ОПЕРАЦИОННОЙ СИСТЕМЫ ANDROID
3 Мобильное приложение для ОС Android 
3.2 Активности приложения 
3.2.6 Таблица рекордов 
----------
Активность таблицы рекордов представляет собой отображение уровня прогресса каждого зарегистрированного пользователя на выбранном уровне развития в порядке убывания уровня прогресса пользователей. На активность таблицы рекордов пользователь переходит из контекстного меню, которое находится на активности главного экрана уровня развития в правом верхнем углу экрана. Внешний вид активности таблицы рекордов изображен на рисунке 16.
Рисунок 16 – Активность таблицы рекордов
Активность описана в файле RecordsActivity.java. Состоит из прокручиваемого вертикально блока (ListView), содержащего уровни прогресса всех пользователей на выбранном уровне развития. Макет активности таблицы рекордов описан в файле activity_records.xml.
Каждый элемент прокручиваемого блока является отдельным блоком, который содержит в себе информацию о текущем уровне прогресса конкретного пользователя на выбранном уровне развития. Слева блока расположено фото пользователя, которое он установил в качестве фото своего профиля. Справа вверху указано число, которое означает положение пользователя в таблице рекордов по выбранному уровню развития. Непосредственно справа от фото находится основная информация о каждом пользователе в таблице рекордов. Указывается имя пользователя и его степень прогресса на данном уровне развития, а именно его уровень развития, полученный опыт на текущем уровне развития и максимальный опыт, который может получить пользователь на текущем уровне развития.
Всякий раз при переходе на активность таблицы рекордов происходит обращение к серверу с запросом на получение данных для наполнения таблицы рекордов. При отправке запроса на сервер и ожидания ответа с него отображается полоса загрузки. Обработка запроса описана в файле серверной части get_records.php. В ответ на запрос пользователь получает массив уровней прогресса каждого пользователя на уровне развития, в котором пользователь перешел на таблицу рекордов. В этот массив входят фото каждого пользователя (если он имеется), имя пользователя, его уровень прогресса на данном уровне развития вместе с текущим и максимальным количеством опыта. Для получения ответа с сервера необходимо подключение устройства к интернету. Если оно отсутствует, то пользователь получит сообщение об ошибке и для повторного запроса ему необходимо отправить запрос повторно.