190
МОДЕЛИРОВАНИЕ И ВИЗУАЛИЗАЦИЯ РАЗЛИЧНЫХ СТРАТЕГИЙ SLAM С ПОМОЩЬЮ LIDAR В ПОМЕЩЕНИЯХ ДЛЯ МОБИЛЬНЫХ РОБОТОВ 
3 Реализованный метод 
3.2 Реализация 
3.2.4 Построение карты 
----------
Класс Map позволяет преобразовывать массив дистанций, полученный с помощью LIDAR в координаты для отображения на PictureBox и реализован метод для построения карты.
Преобразование массива дистанций в точки для отображения:
public List<PointF> distancetodots(List<int> listpoint)
{
List<PointF> tmpdots = new List<PointF>();             int k = 360 / listpoint.Count();
PointF centr = new PointF(this.width / 2, this.height / 2);
for (int i = 0; i < listpoint.Count; i++)
{
PointF mapdot = new PointF(centr.X, centr.Y + listpoint[i]);                 mapdot = Geometry.Turndot(mapdot, centr, 180 + i*k);                 tmpdots.Add(mapdot);
}             return tmpdots;
}
Где listpoint полученный список дистанций. Так как мы знаем длин до препятствия то мы берем какую-то точку и говорим, что она является центром, затем берем первый элемент списка и прибавляем к координате x взятой точки длину до препятствия и поворачиваем на 180+i градусов, где i – индекс количества точек, затем проделываем ту же операцию со следующими элементами списка, таким образом мы получаем новый список, в котором содержится координаты.
Пример получаемой карты на разных этапах движения робота изображен на рисунке 13.
Рисунок 13 – Получаемая в программе карта
Видно, что при помещении робота по окружающей среде происходит построение карты, при этом карта совпадает с окружающей средой.