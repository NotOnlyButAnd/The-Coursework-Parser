247
РАЗРАБОТКА ПРОГРАММНЫХ МОДУЛЕЙ ДЛЯ ВИРТУАЛЬНОЙ ЛАБОРАТОРИИ ИССЛЕДОВАНИЯ МОБИЛЬНЫХ AD HOC СЕТЕЙ 
3 Клиент-сервер 
3.3 Клиент TCP 
----------
Приложение клиент имеет схожие функции, как и для приложения сервера.Так как используются те же самые методы для определения конечной точки, создания экземпляра сокета, отправки и получения данных и закрытия сокета: На рисунке 16 изображена функциональная диаграмма структуры клиента.
Рисунок 16 - Функциональная диаграмма структуры клиента
Метод Connect() – осуществляет установку связи с удаленным сервером.Если применяется протокол, ориентированный на установление соединения, такой как протокол TCP, метод Connect() синхронно устанавливает сетевое соединение между LocalEndPoint и указанной удаленной конечной точкой.Если используется протокол без установления соединения, метод Connect устанавливает удаленный узел по умолчанию.После вызова метода Connect можно послать данные на удаленное устройство с помощью метода Send() или получить данные с удаленного устройства, применив метод Receive().
Метод Connect() будет выполнять блокирование, если только не произведена установка для свойства Blocking значения false перед вызовом метода Connect(). Если используется протокол, ориентированный на
установление соединения, такой как протокол TCP, и отключено блокирование, метод Connect() создаст исключение SocketException, так как требуется время на установление подключения.Для протоколов без установления соединения исключение не создается, так как они просто работают с удаленным узлом, заданным по умолчанию.Для получения определенного кода ошибки можно воспользоваться свойством SocketException.ErrorCode.Получив этот код, можно обратиться за подробным описанием ошибки к документации по кодам ошибок API Windows Socket версии 2 в библиотеке MSDN.Если ошибка возвращает значение WSAEWOULDBLOCK, подключение к удаленному узлу было инициировано объектом Socket, работающим в режиме с установлением соединения, но это подключение пока еще не завершено.Необходимо воспользоваться методом Poll(), чтобы определить, когда объект Socket завершает установление соединения. [Кровчик Э. Net. Сетевое программирование для профессионалов с.187]