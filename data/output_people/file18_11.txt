237
РАЗРАБОТКА МОБИЛЬНОГО ПРИЛОЖЕНИЯ ДЛЯ ОТОБРАЖЕНИЯ РАСПИСАНИЯ НА ПЛАТФОРМЕ ANDROID
3 Разработка приложения 
3.3 Проблемы при разработке 
----------
Основной проблемой при разработке данного приложения была реализация контроллера, позволяющего переключаться между днями в календаре.
Проблема заключалась в элементе recycleView. Дело в том, что данный виджет не имеет встроенного метода onClickItem (в отличии от listView, который не был использован из-за того, что его нельзя расположить горизонтально). В документации виджета не указано, где необходимо устанавливать слушатели. Из-за чего было принято решение, данный метод нужно было реализовать прямо в адаптере, однако слушатель должен быть установлен на каждый элемент календаря, что означает, что его установка невозможна в методе onBindViewHolder, из-за того что поскольку данный метод вызывается неограниченное количество раз (количество зависит от действия пользователя), что неоптимально. Поэтому данный слушатель устанавливается в классе ViewHolder, экземпляр которого создается в методе onCreateViewHolder.
Второй главной проблемой данного контроллера является анимация (покраска его содержимого в разные цвета в зависимости от выбранной недели и дня). Проблема заключалась в том, что в оперативной памяти устройства хранилось не более 10 дней (из 14 возможных), а значит при клике на один из крайних дней в календаре (ПН, ВТ или СР) фон которых затемнялся для удобства пользователя, затемнялся также фон и ПТ, СБ и ВС второй недели соответственно. Это происходило из-за того, что дни, которые не хранились в ОЗУ оказывались в пуле, который хранился в постоянной памяти устройства и их свойства менялись вместе с нулевым, первым и вторым элементами массива из пула.
Решением данных проблем стало добавление функции, вызываемой при клике на элемент календаря, которая полностью обновляет все элементы recycleView.