503
ОРГАНИЗАЦИЯ БАЗЫ ЗНАНИЙ О СВОЙСТВАХ СТОХАСТИЧЕСКИХ МОДЕЛЕЙ БЕСПРОВОДНЫХ КОМПЬЮТЕРНЫХ AD HOC СЕТЕЙ 
2 Проектирование . 
2.2 Проектирование таблиц базы данных. 
2.2.4 Таблица TEMPLATES 
----------
В разделе с требованиями к программе говорилось о необходимости включить отчёты или данные для их построения в базу данных для лучших организации и гибкости программы.
Хранить отчёты вместе с отраженными в них формулами и отображением графиков в формате PDF будет, во-первых, нерационально, во-вторых, не необходимо. Предполагается, что программа предоставляет функционал для поиска и формирования экспериментов со строго определенными параметрами, и пользователь не нуждается в таком количестве уже готовых отчётов, что найти их было бы быстрее и проще, чем сформировать заново. В связи с этим в базе будут храниться только данные для построения отчётности.
В таблицах EXPERIMENTS и DYNAMIC уже содержится материал для формирования формул и графиков, следовательно, остается лишь сформировать шаблон, по которому будет строиться тот или иной тип отчётов.
В рамках данного проекта существует всего два типа отчётов: для экспериментов и для выборки экспериментов. В будущем этот набор может расшириться, что стоит учесть при решении задачи хранения данных для формирования отчётов.
Одним из очевиднейших решений – создание таблицы TEMPLATES, где будет содержаться тела отчётов и формул. Почему шаблоны для формул будут включены в одну таблицу с шаблонами отчётов? Потому что каждая из формул в данный момент и, тем более, на случай увеличения функционала программы будет содержаться не только в одном из отчётов, что делает решение о включении самой формулы в шаблон для отчёта нерациональным. Кроме того, шаблоны для отчётов и формул будут иметь одинаковый строковый формат, что позволяет не нагружать базу и код дополнительными объектами, совершенно не упрощающими последующую обработку.
С другой стороны, поля строкового типа как раз-таки нагружают базу и в большой степени замедляют поиск, сортировку и другие простейшие манипуляции с таблицами. На данный момент в таблице TEMPLATES не планируется содержать столько записей, чтобы их тип мог как-либо замедлить работу с приложением, однако строковые значения в ней будут непозволительно велики и неделимы. Учитывая, что набор таких значений может быть увеличен при дальнейшем расширении функционала, стоит вынести тела самих шаблонов в отдельную таблицу со строками, в которой, помимо них будут храниться ещё и некоторые заголовки физические пути к файлам.
Кроме всего этого, стоит учесть, что шаблон будет включать в себя подшаблоны. Например, шаблоны формул или некоторых таблиц, которые хранятся отдельно, нужно будет включить в основное тело отчёта. Можно было бы реализовать этот процесс во внешнем коде, но было бы объективнее закончить «сборку» шаблона на этапе обращения к классу, обрабатывающему базу, поэтому в запись о самом шаблоне было решено включить ещё и список его подшаблонов. Он будет храниться в виде строки, однако каждая такая строка будет слишком мала, чтобы как-либо нагрузить таблицу.
Чтобы знать, в какое место шаблона нужно вставить чётко определенный дочерний, будут использоваться уникальные текстовые метки.
Таблица 4 – Список полей TEMPLATES
Название поля
Тип
Предназначение
ID
int
Уникальный идентификатор для записи шаблона
BODY_STRING_ID
int
Идентификатор записи строки, которой содержится тело шаблона
в
Продолжение таблицы 4
CHILDREN
varchar(50)
Список идентификатор дочерних шаблонов, хранится в базе через запятую
MARK_STRING_ID
int
Поле имеет значение не NULL только в том случае, если запись относится к дочернему шаблону. Это ссылка на строку, в которой указано, вместо какой метки нужно вставить дочерний шаблон в тело основного.