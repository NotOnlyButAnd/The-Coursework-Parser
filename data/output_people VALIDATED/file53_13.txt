479
РАЗРАБОТКА ВЫСОКОНАГРУЖЕННОГО РАСПРЕДЕЛЕННОГО ПРИЛОЖЕНИЯ 
4 Функциональность пользовательской части проекта . 
4.2 Описание главной страницы проекта 
----------
Изображение интерфейса главной страницы web проекта приведено на  рис 5.
Рисунок 5 — Изображение главной web страницы проекта
Главная страница состоит из пяти блоков и изображена на рисунке 6.
Рисунок 6 — Разделение по блокам
Скрипт index.php, который выводит главную страницу, универсален и используется ещѐ для нескольких целей. Внешний вид сгенерированной скриптом страницы зависит от параметра reg, передаваемого скрипту методом GET. В зависимости от значений этого параметра блоки меняют свой внешний вид. Рассмотрим подробнее все 5 блоков.
а) блок 1 — в котором находится шапка сайта, состоит из jpg файла с
графическим изображением шапки сайта. Не изменяется;
б) блок 2 — блок дополнительной информации, может находиться в
одном из трѐх возможных состояний:
* не содержит дополнительной информации;
* при значении ?reg=2 выводит следующую информацию, указанную
на рисунке 7;
Рисунок 7 — Сообщение блока дополнительной информации
Используется при успешной регистрации и редиректа пользователя на главную страницу, для авторизации.
* при значении ?reg=3 выводит следующую информацию, указанную на рисунке 8;
Рисунок 8 — Сообщение блока дополнительной информации
Используется при отсутствии активности пользователя в течение определѐнного времени. Время в минутах задаѐтся в файле config.php и по умолчанию равно 20 минутам.
в) блок 3 – блок активных действий. Может находиться в одном из двух
состояний:
1.  форма авторизации и опций, как показано на рисунке 9;
Рисунок  9 — Форма авторизации пользователей
При авторизации, происходит проверка на:
* заполненность всех полей;
* существование пользователя в базе данных;
* соответствие имени пользователя и пароля;
При невыполнении хотя бы одного из этих условий выводиться соответствующее предупреждение.
В качестве опций, пользователь может настроить время обновления окна сообщений, выбрать один из двух сменных дизайнов, и выбрать цвет своих сообщений в окне сообщений.
2.  при нажатии на ссылку «Регистрация» на главной странице выполняется тот же скрипт index.php, с переданным методом GET  значением переменной reg, равным ?reg=1 и в блоке 3 выводится форма регистрации, показанная на рисунке 10;
Рисунок 10 — Форма регистрации пользователей
При регистрации происходит проверка на:
* заполнение всех полей ввода;
* отсутствие пробелов в имени пользователя;
* отсутствие пользователя с таким именем в базе данных;
* совпадение содержимого поля ввода пароля, и содержимого поля ввода подтверждения пароля;
При невыполнении хотя бы одного из этих условий выводиться соответствующее предупреждение.
г) блок 4 – блок вывода списка пользователей, находящихся онлайн. Пользователь считается находящимся онлайн, если поле online записи в базе данных имеет значение 1. И кроме того поле time > time()—$min_offline*60.
Последнее условие проверяет, зарегистрирована ли активность пользователя в течение последних $min_offline минут. Если пользователь был не активен всѐ это время то, он считается оффлайн. Значение переменной $min_offline задаѐтся в файле config.php и по умолчанию равно 20 минутам;
Если ни один из пользователей не находится онлайн, то выводится надпись: Никого нет.
д) блок 5 – блок с указанием автора и разработчика реализуемого проекта, как на рисунке 11.
Рисунок 11 — Блок с указанием автора и разработчика
После прохождения авторизации пользователь попадает на страницу chat.php,  которая отображает сам чат.