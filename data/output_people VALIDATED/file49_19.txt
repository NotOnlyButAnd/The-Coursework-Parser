273
РАЗРАБОТКА МОБИЛЬНОГО ПРИЛОЖЕНИЯ МНОГОЗВЕННОЙ АРХИТЕКТУРЫ НА БАЗЕ ОПЕРАЦИОННОЙ СИСТЕМЫ ANDROID
3 Мобильное приложение для ОС Android 
3.2 Активности приложения 
3.2.7 Настройки 
----------
Активность настроек представляет собой отображения личных установок пользователя, которые он может изменить по своему усмотрению. Переход на активность настроек осуществляется из контекстного меню, которое находится на активности главного экрана уровня развития в правом верхнем углу экрана. Внешний вид активности настроек изображен на рисунке 17.
Рисунок 17 – Активность настроек
Активность описана в файле Settings.java. Состоит из нескольких компонентов редактируемого текста (EditText), идущих друг за другом. Среди них присутствует редактирование пароля учетной записи пользователя, личного имени пользователя (имени, фамилии и отчества) и статуса пользователя. Внизу экрана активности находится кнопка «сохранить» для сохранения изменений, внесенных пользователем. Макет активности таблицы рекордов описан в файле activity_settings.xml.
Пользователь способен изменить пароль своей учетной записи на любой другой по своему усмотрению. Длина пароля должны быть в пределах от 4 до 20 символов, пароль дожжен содержать латинские буквы и не содержать пробелов. Для смены пароля пользователю необходимо ввести свой текущий  пароль, установленный для авторизированной учетной записи.
По нажатию на кнопку «сохранить» внизу экрана активности настроек пользователю предлагается согласиться с его выбором, после которого отправляется запрос на сервер для изменения личных настроек пользователя. Обработка запроса изменения настроек описана в файле серверной части accept_settings.php, Перед тем, как занести новые настройки, проверяется соответствие введенного текущего пароля (если таков был введен) с паролем, хранящимся на сервере базы данных. Если соответствие установлено, то новые настройки утверждаются и пользователю возвращается ответ об успешном их изменении. Во время обработки запроса появляется полоса загрузки, которая активна до тех пор, пока пользователь не получит ответ с сервера.
По возвращению с активности настроек на активность главного экрана уровня развития пользователь видит уже установленные им новые настройки, а при следующей его авторизации пользователю необходимо ввести в поле пароля новый установленный пароль.