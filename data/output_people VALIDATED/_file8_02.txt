778
ОПТИМИЗАЦИЯ ИСПОЛЬЗОВАНИЯ МОБИЛЬНОГО ТРАФИКА В ОС ANDROID
2 Анализ существующих решений 
----------
Существует множество способов экономии мобильного трафика при прослушивании аудиозаписей, рассмотрим встроенные в ОС Android функции:
* ограничение фонового трафика – многие программы подгружают данные из интернета даже в закрытом состоянии. Зачастую так делают программы для on-line обмена сообщениями и программы, использующие местоположение пользователя (например, погода, карты и т.д.). Обычно загружаются небольшие файлы, но из-за количества таких программ может расходоваться большое количество трафика. Подобная функция помогает пользователю ограничивать расход трафика для программ, которыми он редко пользуется. Но ограничение может вызвать проблемы, связанные с работой ограниченных программ, которые не получили необходимые им данные;
* предупреждение и отключение – в ОС Android также есть функция, позволяющая уведомлять пользователя о расходе трафика и даже отключить мобильный интернет. Выглядит это так: пользователь указывает размер пакета своего мобильного трафика на месяц, после чего система будет оповещать каждый раз, когда количество израсходованного трафика достигнет введенное значение. Кроме того, пользователь может настроить блокировку использования мобильного интернета по достижении введенного значения. Функция очень полезна в ситуациях, когда мобильный оператор автоматически взимает дополнительную плату, если пользователь израсходовал весь доступный трафик раньше времени;
* отключение автоматических обновлений – при желании пользователь может отключить автоматическое обновление программ, что позволит контролировать расход трафика и обновлять программы в удобный для пользователя момент. Это очень полезная функция, но у нее есть один существенный недостаток – вовремя не обновленная программа может работать не корректно, что может вызвать неполадки в работе устройства.
Что касается средств, придуманных разработчиками, то их огромное множество. Рассмотрим самые распространённые из них:
* скачивание на устройство – первое и самое очевидное решение проблемы расхода интернет-трафика, подходящее для всех типов данных. Пользователь загружает нужные файлы на устройство заранее, используя Wi-Fi, что существенно экономит мобильный трафик. Подобная функция имеется у многих программ, например, программа для прослушивания аудиокниг «Патефон» для ОС Android [3]. Но этот способ не всегда удобен. Например, при воспроизведении медиа файлов: пользователю приходится ждать завершения загрузки файла и только потом его воспроизводить. Тем не менее, решение может быть весьма полезным. Некоторые программы используют автоматическую загрузку данных при подключенном Wi-Fi (например, обновление программы), что удобно для пользователя, но порой может вызывать проблемы. Например, если мобильное устройство подключено к Wi-Fi сети с ограниченным трафиком. В таком случае, необходимо спрашивать у пользователя разрешение на загрузку с использованием данной сети. Также к данной функции иногда добавляют предупреждение о размере скачиваемого файла, если пользователь собирается загружать его с помощью мобильного интернета. Это позволяет пользователю контролировать объем загружаемых данных и, если этот объем слишком велик, отложить загрузку до подключения к Wi-Fi сети;
* снижение качества загружаемых данных – функция подходит для медиа файлов и используется в стандартных Google программах (Например, «Музыка Google» для ОС Android [3]). Пользователь может выбрать качество получаемых данных, что напрямую влияет на размер загружаемых файлов: чем хуже качество, тем меньше размер файла. Функция полезна, но страдает качество получаемых данных, из-за чего ее использование имеет значение только в случаях, когда качество файлов не имеет значения;
* сохранение прогресса воспроизведения – одна из самых известных функций, использующаяся в воспроизведении медиа файлов. Отлично подходит для файлов большой длины, но также используется и для небольших файлов. После прекращения воспроизведения записи программа сохраняет место, на котором было прервано воспроизведение и при повторном включении начинает воспроизведение именно с этого места. Это позволяет экономить как время пользователя, так и интернет-трафик, загружая запись с нужного места, а не с самого начала. Подобное решение используется практически во всех программах, связанных с воспроизведением аудиозаписей («Apple Music» для ОС Android [3]) и видеозаписей («YouTube» для ОС Android [3]);
* кэширование файлов – под кэшированием подразумевается сохранение файлов для последующего повторного использования.  В случае воспроизведения медиа файлов, кэширование бывает 2 видов: временное сохранение файла в оперативную память (до окончания воспроизведения) и сохранение на постоянной основе в память устройства (до удаления пользователем). Временное сохранение позволяет пользователю перематывать воспроизведение назад и вперед, не загружая каждый раз заново нужный фрагмент файла. По окончании воспроизведения временный файл кэша автоматически удаляется. Кэширование с сохранением на устройстве в основном используется в on-line воспроизведении музыки, в расчете на то, что пользователь будет прослушивать одну и ту же запись несколько раз, что позволяет экономить трафик. Чаще всего такое кэширование происходит таким образом: во время прослушивания аудиозаписи в режиме on-line программа загружает эту запись на устройство для дальнейшего воспроизведения в режиме off-line. При желании пользователь может удалить аудиозапись с устройства. Кэширование аудиозаписей используется во многих популярных on-line плеерах, например, в «ВКонтакте» для ОС Android [3]. Однако, для воспроизведения файлов, не рассчитанных на повторное прослушивание, данный способ не совсем подходит, так как просто будет забивать память устройства ненужными пользователю данными. Данную проблему можно решить таким образом: необходимо сохранять на устройстве лишь часть воспроизводимого файла, начиная воспроизведение после паузы с сохраненного участка, а потом переходя на on-line режим. Куски файла должны перезаписываться на устройство по мере прослушивания пользователем, что сэкономит место на устройстве и мобильный трафик.